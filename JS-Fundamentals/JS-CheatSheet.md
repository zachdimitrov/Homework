## Introduction

**zakachane na JS za HTML**
```HTML
<scriрt src="scripts.js" type="text/javascript">
<!-- code placed here will not be executed! -->
</scriрt>
```
**JS Examples - Pop-up boxes**
```JS
alert("Some text here");
confirm("Are you sure?");
prompt ("enter amount", 10);
```
**Browser built-in objects**
- window
- document
- screen
- browser

**Math object**
```JS
var x = Math.random(); // random value
x = Math.floor(x); // smallest number
let PI = Math.PI; // 3.141592653589793
```
**Date object**
```JS
var now = new Date(); // current date time
  var hour = now.getHours();
  var min = now.getMinutes();
  var sec = now.getSeconds();
var timer = setTimeout(bang, 5000); // execute aftet 5 sec
clearTimeout(timer); // clear timer
var timer = setInterval(clock, 1000); // execute in 1 sec intervals
clearInterval(timer); // clear timer
```
**Console object**
- debug(message)
- info(message)
- log(message)
- warn(message)
- error(message)

## Data types and viariables

**Declare variables**
```JS
var count = 5 // var se vijda v celiq function scope, bez znachenie dlai e v zatvoren blok kato cikal
let mark = 5.25 // let e vidima samo v konkretniq blok kato cikyl naprimer
var value = 3.14159;
value = new Number(100); // Number { 100 } wrapped as an object of type Number
let minValue = Number.MIN_VALUE; // 5e-324
let maxValue = Number.MAX_VALUE; // 1.79e+308
```
**Converting numbers**
```JS
var valueDouble = 8.75;
var valueInt = valueDouble | 0; // 8 - converts floating point to integer
var roundedInt = (valueDouble + 0.5) | 0; // 9 - rounded
var str = '1234';
var i = str | 0; // number 1234
let numberString = '123'
Number('123.3') -> returns 123.3
'123.3' * 1 -> returns 123.3
+'123.3' -> returns 123.3
console.log(parseInt(numberString)); // prints 123
let floatString = '12.3';
console.log(parseFloat(floatString)); // prints 12.3
let str = '123Hello';
console.log(parseInt(str)); // prints 123
console.log(typeof x); // pokazva kakvy e tipa na stoinostta \X
const depth = 250; // konstanta
a = 5; // tova e globalna promenliva kato winfow.a = 5; ne se pravi!
```
**Strings**
```JS
let s = 'Welcome to JavaScript';
let name = 'John' + ' ' + 'Doe';
let greeting = `${s}, ${name}`; // nov zapis podobno na C#
```
## Operators and expressions
**Category	Operators**
- Arithmetic	+ - * / % ++ --
- Logical	&& || ^ !
- Binary	& | ^ ~ << >> >>>
- Comparison	== != < > <= >= === !==
- Assignment	= += -= *= /= %= |= ^= <<= >>=
- Concatenation	+
- Other	. [] () ?: new in , delete void typeof instanceof

## Conditional statemenst
**if** and **if-else** - statement
```JS
var str = '1c23';
if(!(+str)){ // if str is not a number, +str is NaN
  throw new Error('str is not a Number!');
  } else {
  str = 5;
  }
```
**switch - case** - statement
```JS
switch (false) {
  case !!score: // true when score is NaN, if you miss a brake the next true code will be executed
  case !(score < 2 || score > 6): console.log('Invalid score'); break;
  case !(score < 3.5): console.log('Poor' + score); break;
  case !(score < 4.5): console.log('Good ' + score); break;
  /* case for score < 5.5 */
  default: console.log('Excellent ' + score); break;
}
```
- **falsy values** - false, 0, "" / '', null, undefined, NaN
- other valuer are **truthy** (http://www.sitepoint.com/javascript-truthy-falsy/)

## Loops
**while** - loop
```JS
let counter = 0;
while (counter < 10) {
    console.log('Number : ' + counter);
    counter += 1;
}
```
**do - while** - loop (calculating factorial)
```JS
let fact = 1, factStr = 'n! = ';
do {
    fact *= n;
    factStr += n + '*'
    n -= 1;
} while (n);
```
**for** - loop
```JS
for (let i = 1, sum = 1, N = 128; i <= N; i *= 2, sum += i) {
    console.log('i=' + i + ', sum=' +sum); // can have several counter variables
}
```
**for - in** - loop
*loops over enumerable property names of an object*
*use when indexes are unknown, works for objects too*
```JS
const arr = [1, 2, 3, 4, 5, 6];
for (const index in arr) { // iterating over elements of an array
    console.log(arr[index]);
}
// another example
var obj = {a:1, b:2, c:3};
for (var prop in obj) {
  console.log("obj." + prop + " = " + obj[prop]);
}
```
**for - of** - loop
*does use an object-specific iterator and loop over the values generated by that*
```JS
let iterable = new Map([["a", 1], ["b", 2], ["c", 3]]);

for (let entry of iterable) {
  console.log(entry);
}
// [a, 1]
// [b, 2]
// [c, 3]

for (let [key, value] of iterable) {
  console.log(value);
}
// 1
// 2
// 3
```
## Arrays

**declaring arrays**
```JS
// Array holding integers
var numbers = [1, 2, 3, 4, 5];
// Array holding strings
var weekDays = ['Monday', 'Tuesday', 'Wednesday',
  'Thursday', 'Friday', 'Saturday', 'Sunday']
// Array of different types
var mixedArr = [1, new Date(), 'hello'];
// Array of arrays (matrix)
var matrix = [
  ['0,0', '0,1', '0,2'],
  ['1,0', '1,1', '1,2'],
  ['2,0', '2,1', '2,2']];
// Not recommended ways to declare array, ure the ones above
var arr = new Array(1, 2, 3, 4, 5); // longer syntacs
var arr = new Array(10); // assing initial length of 10, not number 10 as a value
```
**using arrays**
```JS
//always declare var variables on the top of the scope!
var array,
    len,
    reversed,
    i,
    j;

array = [1, 2, 3, 4, 5];
reversed = [];

for (i = 0, len = array.length; i < len; i += 1) { 
    j = len - i - 1; // use for when we need the index
    reversed.push(array[j]); // push adds an element at the end of the array
}
```
**manipulating arrays**
```JS
var array = ['mon', 'tue'];
array.push('wed') // result is: ['mon', 'tue', 'wed']
array.pop() // returns last element 'wed' - result is: ['mon', 'tue']
array.unshift('daysofweek') // add ana element at the head
array.shift() // removes the element at the head and returns its value
```
**methods of arrays**
```JS
var arr1 = [1, 2, 3], 
    arr2 = ["one", "two", "three"];
var reversed = arr1.reverse(); //reversed = [3, 2, 1]
var asString = arr1..join(", "); // '1, 2, 3' as string
var result = arr1.concat(arr2); // result = [1, 2, 3, "one", "two", "three"] - this is new array
[].push.apply(arr1, arr2); // arr1 = [1, 2, 3, "one", "two", "three"]
var part = result.slice(1, 3); // part = [2, 3, "one"]; - new array with copy of elements from index1 to index2
var arr3 = arr1.slice(); // this clones the array 
// splice(1, 2, 3, 4) - removes at index (1) number of elements (2), and adds elements (3), (4)...
var fruits = ["Banana", "Orange", "Apple", "Mango"];
fruits.splice(2, 1, "Lemon", "Kiwi"); // Banana,Orange,Lemon,Kiwi,Mango - lemon is removed and new elements are inserted
```
**other methods**
```JS
someArray.indexOf(element [, rightOf]); // returns the index of the first matched [starting at position 'rightOf']
someArray.lastIndexOf(element [, leftOf]) // the same but from the end of the array
// if element is not found methods return -1
someArray.isArray(); // true if it is array
```
## Functions

**declare functions**
*declare by function declaration*
```JS
function printLogo() {
    console.log("JavaScript Fundamentals"); // functions always return value
}
```
*declare using the constructor of the Function object*
```JS
var print = new Function("console.log('Hello')"); 
```
*declare by function expression*
```JS
var print = function() { console.log("Hello") }; // neshto kato delegat
```
**calling functions**
```JS
function print(){
   console.log("printed");
}

function anotherPrint(){
   print();
   anotherPrint();
}
```
**functions with parameters**
```JS
function printSign(number) {
    if (number > 0) {
        console.log("Positive");
    } else if (number < 0) {
        console.log("Negative");
    } else {
        console.log("Zero");
    }
}
```
**arguments object**

*it exists in every function*
```JS
args = [].slice.apply(arguments); // taka se prevryshta arguments obekta v masiv
```
**returna a value**
```JS
function multiply (firstNum, secondNum) {
    return firstNum * secondNum; // if we use return; only it terminates the function
}
```
**function scope**
- this is the scope inside the funcion, 
- if a var is declared between the function {} it is visible only there
- let is visible only in its scope even if it is a for loop or if-else

**overloading a function**
```JS
// don't create many functions with the same name, they hide each othere
// there is anothear way of overloading - using arguments number
function printText (number, text) {
  switch (arguments.length) {
    case 1 : console.log (`Number: ${number}`);
      break;
    case 2 :
      console.log (`Number: ${number}`);
      console.log (`Text: ${text}`);
      break;            
  }
}
// or using arguments type
function printValue (value) {
  switch (typeof value) {
    case "number" : console.log (`Number: ${value}`); break;
    case "string" : console.log (`String: ${value}`); break;
    case "object" : console.log (`Object: ${value}`); break;
    case "boolean" : console.log (`Number: ${value}`); break;
  }
}
// or using options parameter (object as parameter)
function getRandomValue(opt) {
  var min = +opt.min || Number.MIN_VALUE;
  var max = +opt.max || Number.MAX_VALUE;
  return (Math.random() * (max - min + 1) + min) | 0;
}
```
## Objects

**declaration**
```jS
let person = { 
  firstName: 'Doncho',
  lastName: 'Minkov',
  toString: function () {
    return this.firstName + ' ' + this.lastName;
  }
};
```
**object template**
```JS
function makePerson(fname, lname) {
  return {
    fname: fname,
    lname: lname,
    toString: function () {
      return this.fname + ' ' + this.lname;
    }
  }
}
```
**properties**
```JS
document.write === document['write']
```
## Methods of arrays and objects

**every** - returns true if all elements meet the criteria in Callback
- Signature: [].every(callback);
- Callback: callback(item [, index [,arr]]) // callback needs to have exactly theese parameters

```JS
function isOdd(number) {
  return !!(number % 2);
}
var arr = [1, 2, 3, 4];
console.log(arr.every(isOdd)); //false
```
**some** - returns true if one element meets tche criteria in callback
```JS
[].some(callback);
callback(item [, index [,arr]])
//example
console.log(arr.some(isOdd)); //true
```
**filter** - extracts a new array with the elements that meet the criteria  
- Sgnature: [].filter(callback);
- Callback: callback(item [, index [, arr]])

```JS
console.log(arr.filter(isOdd)); //[1, 3]
```
**reduce** - returns a single object, the result of the callback
```JS
var sum = arr.reduce(function(sum, number) {
  return sum + number;
}, 0);
var product = arr.reduce(function(sum, number) {
  return sum * number;
}, 1);
console.log(sum);               //10
console.log(product);           //24
```
**map** - returns a new array where every element is mapped based on a callback
```JS
var squares = arr.map(function(number) {
  return number * number;
}); // will return [1, 4, 9, 16]
```
**forEach** - passes each element as argument of callback
```JS
var numbers = ['One', 'Two', 'Three', 'Four', 'Five'];
numbers.forEach(function(item, index) {
  console.log('Item at' + index + 'has value' + item);
}); // print the elements of an array with their index
```
**find** - returns the leftmost element in the array, that meets the criteria in callback
```JS
var numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
console.log(numbers.find(function(item) {
  return !!(item % 2) && item > 5;
}));            //prints 7
```
**findIndex** - returns the index of the leftmost element in the array, that meets the criteria in callback
```JS
var numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
console.log(numbers.findIndex(function(item) {
  return !!(item % 2) && item > 5;
}));            //prints 6(element 7)
```
**sort**
- Signature: [].sort(callback);
- Callback: callback(obj1, obj2)

```JS
var numbers = [5, 1, 2, 4, 6];
numbers.sort(function(x, y) {
  return y - x;
});
console.log(numbers);  //[ 6, 5, 4, 2, 1 ]
```
**fill** - fills an array with the given value / not supported
- Signature: [].fill(callback);
- Callback: callback(value [, from [, to]])

```JS
var count = 15,
  arr = Array.from({length: count})
    .fill(1);
console.log(arr);
```
###using ES 2015

```JS
var digitNames = digits.fill(0)
  .map(x => Math.random()*10 | 0)
  .filter(x => !!(x%2))
  .map(x => […][x]);
console.log(digitNames);
```
## Strings

**object wrapper** - like number string har a object wrapper and methods are called to it
```JS
let str = 'sample'; // create string
let tempStr = new String(str); // use it as object
tempStr.length; // call property
```
- ```new String('…')``` - creates a string object
- ```String(strObject)``` - creates a primitive string

**string methods**
- ```string.length``` - Returns the number of characters in the string
- ```string[index]``` - gets a single char-string at given index
- ```charAt(index)``` - gets a single char at index
- ```string.concat(string2)``` - new string from 2
- ```string.replace(str1, str2)``` - Replaces first occurrence of str1 with str2
- ```string.search(regex)``` - searches for a substring based on regular expression
- ```string.indexOf(substring [,position])``` - Returns the left-most occurrence of substring in a string, that is after position
- ```string.lastIndexOf(substring [,position])``` - the same bur fom the end
- ```string.split(separator)``` - Splits the string by separator and returns an array of strings
- ```string.trim()``` - Removes whitespace from the beginning and end of the string
- ```str.trimLeft(), str.trimRight()``` - the same as above, but only from the left or the right side
- ```string.substr(start, length)``` - Returns a substring, starting from start and counting length characters
- ```string.substring(start, end)``` - Returns a substring, starting from start and ending at end
- ```string.valueOf()``` - Returns the primitive value of the object string
- ```str.padLeft(count [,char]), str.padRight(count [,char])```

**string concatenation**
```JS
var strConcat1 = str1 + str2; // simple slow method
var strConcat2 = str.concat(str2);
[].push(srt1, str2, str3, …).join(''); // this method works like stringbuilder
```
**preventing injection** - escaping strings
```JS
String.prototype.htmlEscape = function () {
  let escapedStr = String(this)
      .replace(/&/g, '&amp;');
      .replace(/</g, '&lt;');
      .replace(/>/g, '&gt;');
      .replace(/"/g, '&quot;');
      .replace(/'/g, '&#39');
  return escapedStr;
}
```
## Regular Expressions

**regex syntax**
```JS
const literalRegex = /y$/g; // literal syntax
const constructorRegex = new RegExp('^T', 'g'); // function constructor syntax
```
**methods and properties** - [here in MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp)
- ```RegExp.test``` – searches for a match in a given string. Returns true or false  
- ```RegExp.exec``` - searches for the next match in a given string  
  Returns an array of all captured groups for the found match or null.  
- ```String.match``` – searches for a match in a string  
  Returns an array of information or null on a mismatch  
- ```String.replace``` – replaces the matched substring with a replacement substring   
  Returns the new string
- ```String.split``` – breaks a string into an array of substrings, using a regex or a string search for matches  
  Returns an array
- ```String.search``` – tests for a match in a string  
  It returns the index of the match, or -1 if the search fails  

**special characters** - [complete List](https://developer.mozilla.org/en/docs/Web/JavaScript/Guide/Regular_Expressions#Using_special_characters)
- ```\*``` – The preceding character/group is matched 0 or more times
- ```\+``` – Almost the same behaviour as * - the preceding character/group is matched 1 or more times
- ```?``` – The preceding character/group is matched 0 or 1 times
- ```.(dot)``` – matches any single character except the newline character
- ```|``` – Matches one pattern or the other
- ```[xyz]``` – Character set - Matches any of the characters
- ```[x-z]``` – Character set - Matches any one between the characters range
- ```[^xyz]``` – Inverted characters set - Matches all other characters
- ```{N}``` – matches exactly N occurrences of the preceding character/group
- ```{N, M}``` – matches at least N and at most M occurrences of the preceding character/group
- ```^``` - matches the start of the string
- ```$``` - matches the end of the string
- ```\s``` – matches a single white space character, including space, tab, form feed, line feed
- ```\S``` – matches a single character other than white space
- ```\d``` – matches a digit character - Equivalent to **[0-9]**
- ```\D``` – matches any non-digit character - Equivalent to [^0-9]
- ```\w``` – matches any alphanumeric character including the underscore
- ```\W``` – matches any non-alphanumeric or underscore character

##### Regex Cheat Sheet - from [RegExr](http://regexr.com/)
**Character classes**
```.```	any character except newline  
```\w \d \s``` - word, digit, whitespace  
```\W \D \S``` - not word, digit, whitespace  
```[abc]``` - any of a, b, or c  
```[^abc]``` - not a, b, or c  
```[a-g]``` - character between a & g  
**Anchors**  
```^abc$``` - start / end of the string  
```\\b \\B``` - word, not-word boundary  
```**Escaped characters**  
```\\. \\* \\``` - escaped special characters  
```\\t \\n \\r``` - tab, linefeed, carriage return  
```\u00A9``` - unicode escaped ©  
**Groups & Lookaround**  
```(abc)``` - capture group  
```\\1```	backreference to group #1  
```(?:abc)``` - non-capturing group  
```(?=abc)``` - positive lookahead  
```(?!abc)``` - negative lookahead  
**Quantifiers & Alternation**  
```a* a+ a?``` - 0 or more, 1 or more, 0 or 1  
```a{5} a{2,}``` - exactly five, two or more  
```a{1,3}``` - between one & three  
```a+? a{2,}?``` - match as few as possible  
```ab|cd``` - match ab or cd  
  
